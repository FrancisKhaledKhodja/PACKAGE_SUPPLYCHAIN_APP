<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SupplyChainApp – Fonctionnalités & Évolutions</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #0f1a30;
      --panel2: #0b162c;
      --text: #e6edf7;
      --muted: #a7b3c8;
      --accent: #60a5fa;
      --accent2: #22c55e;
      --danger: #ef4444;
      --warning: #f59e0b;
      --border: rgba(255,255,255,0.10);
      --shadow: 0 18px 40px rgba(0,0,0,0.35);
      --radius: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: var(--sans);
      background: radial-gradient(1200px 900px at 20% 15%, rgba(96,165,250,0.18), transparent 55%),
                  radial-gradient(900px 700px at 85% 70%, rgba(34,197,94,0.12), transparent 55%),
                  var(--bg);
      color: var(--text);
      overflow: hidden;
    }

    .deck {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
    }

    .topbar {
      padding: 14px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border);
      background: rgba(11,18,32,0.60);
      backdrop-filter: blur(10px);
    }

    .brand {
      display: flex;
      gap: 10px;
      align-items: baseline;
      flex-wrap: wrap;
    }

    .brand h1 {
      font-size: 16px;
      margin: 0;
      letter-spacing: 0.2px;
      font-weight: 700;
    }

    .brand .meta {
      font-size: 12px;
      color: var(--muted);
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--muted);
      font-size: 12px;
      user-select: none;
    }

    .controls kbd {
      font-family: var(--mono);
      font-size: 12px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      color: var(--text);
    }

    .stage {
      flex: 1;
      display: grid;
      place-items: center;
      padding: 22px;
    }

    .slide {
      width: min(1150px, calc(100vw - 44px));
      height: min(660px, calc(100vh - 110px));
      background: linear-gradient(180deg, rgba(15,26,48,0.92), rgba(11,22,44,0.92));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 34px 38px;
      display: none;
      position: relative;
      overflow: hidden;
    }

    .slide.active { display: block; }

    .slide::before {
      content: "";
      position: absolute;
      inset: -2px;
      background: radial-gradient(800px 480px at 20% 0%, rgba(96,165,250,0.12), transparent 55%),
                  radial-gradient(650px 520px at 90% 100%, rgba(34,197,94,0.08), transparent 55%);
      pointer-events: none;
    }

    .slide > * { position: relative; }

    .title {
      margin: 0 0 8px 0;
      font-size: 34px;
      letter-spacing: -0.2px;
    }

    .subtitle {
      margin: 0 0 18px 0;
      color: var(--muted);
      font-size: 16px;
      line-height: 1.45;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }

    .card {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 14px;
      padding: 14px 16px;
    }

    .card h3 {
      margin: 0 0 8px 0;
      font-size: 14px;
      color: var(--text);
      letter-spacing: 0.2px;
    }

    ul { margin: 0; padding-left: 18px; }
    li { margin: 6px 0; color: var(--text); line-height: 1.35; }

    .muted { color: var(--muted); }

    .pill {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(255,255,255,0.06);
      margin-right: 8px;
      margin-top: 6px;
      color: var(--text);
      white-space: nowrap;
    }

    .pill.accent { border-color: rgba(96,165,250,0.35); background: rgba(96,165,250,0.10); }
    .pill.good { border-color: rgba(34,197,94,0.35); background: rgba(34,197,94,0.10); }
    .pill.warn { border-color: rgba(245,158,11,0.35); background: rgba(245,158,11,0.10); }

    .foot {
      position: absolute;
      left: 20px;
      right: 20px;
      bottom: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      color: var(--muted);
      font-size: 12px;
    }

    .progress {
      flex: 1;
      height: 6px;
      background: rgba(255,255,255,0.08);
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.08);
      max-width: 360px;
    }

    .progress > div {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(96,165,250,0.95), rgba(34,197,94,0.85));
    }

    .mono { font-family: var(--mono); }

    .two-col {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 18px;
    }

    .big-number {
      font-size: 44px;
      font-weight: 800;
      letter-spacing: -0.8px;
      margin: 0;
    }

    .callout {
      border-left: 4px solid rgba(96,165,250,0.85);
      padding: 10px 12px;
      background: rgba(96,165,250,0.08);
      border-radius: 10px;
      margin-top: 10px;
      color: var(--text);
    }

    .small {
      font-size: 13px;
      color: var(--muted);
      line-height: 1.4;
    }

    .nowrap { white-space: nowrap; }

    @media (max-width: 980px) {
      .grid { grid-template-columns: 1fr; }
      .two-col { grid-template-columns: 1fr; }
      .slide { padding: 26px 22px; }
      .title { font-size: 28px; }
    }

    @media print {
      body { overflow: visible; }
      .topbar { display: none; }
      .stage { padding: 0; }
      .slide {
        display: block !important;
        page-break-after: always;
        width: 100vw;
        height: 100vh;
        border-radius: 0;
        box-shadow: none;
      }
    }
  </style>
</head>
<body>
  <div class="deck">
    <div class="topbar">
      <div class="brand">
        <h1>SupplyChainApp</h1>
        <div class="meta">Slides – Fonctionnalités & évolutions (jusqu’à v1.5.0)</div>
      </div>
      <div class="controls">
        <span class="muted">Navigation</span>
        <kbd>←</kbd><kbd>→</kbd>
        <span class="muted">/</span>
        <kbd>Home</kbd><kbd>End</kbd>
        <span class="muted">/</span>
        <kbd>Esc</kbd>
      </div>
    </div>

    <div class="stage" id="stage">
      <!-- Slide 1 -->
      <section class="slide active" data-title="Intro">
        <h2 class="title">SupplyChainApp</h2>
        <p class="subtitle">Fonctionnalités clés, parcours utilisateur et évolutions principales (versions 1.3 → 1.5.0).</p>

        <div class="two-col">
          <div class="card">
            <h3>Objectif</h3>
            <ul>
              <li>Centraliser les données Supply Chain (articles, stocks, magasins, points relais, Helios).</li>
              <li>Réduire les manipulations Excel et accélérer la décision opérationnelle.</li>
              <li>Proposer une interface web unique, accessible via un EXE Windows autonome.</li>
            </ul>
            <div class="callout small">
              <div><span class="mono">Frontend</span> : pages statiques (dossier <span class="mono">web/</span>), servies localement.</div>
              <div><span class="mono">Backend</span> : API Flask sur <span class="mono">127.0.0.1:5001</span>.</div>
            </div>
          </div>
          <div class="card">
            <h3>Points forts</h3>
            <div class="pill accent">Stock & localisation</div>
            <div class="pill accent">Annuaire magasins & PR</div>
            <div class="pill accent">Parc Helios</div>
            <div class="pill accent">Affectations techniciens ↔ PR</div>
            <div class="pill good">Mise à jour automatique (ETL)</div>
            <div class="pill warn">Distribution EXE (PyInstaller)</div>

            <p class="small" style="margin-top:12px;">
              Version de livraison visée : <span class="mono nowrap">1.5.0</span> – exécutable <span class="mono nowrap">SUPPLYCHAIN_APP_v1.5.0.exe</span>.
            </p>
          </div>
        </div>

        <div class="foot">
          <div class="muted">SupplyChainApp – présentation</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 2 -->
      <section class="slide" data-title="Architecture">
        <h2 class="title">Architecture (vue simple)</h2>
        <p class="subtitle">Une UI web locale + une API locale, le tout packagé dans un EXE.</p>

        <div class="grid">
          <div class="card">
            <h3>Composants</h3>
            <ul>
              <li><span class="mono">web/</span> : HTML/CSS/JS (pages par fonctionnalité).</li>
              <li><span class="mono">src/supplychain_app</span> : API Flask, blueprints.</li>
              <li><span class="mono">path_datan/folder_name_app</span> : parquets (données de travail).</li>
            </ul>
          </div>
          <div class="card">
            <h3>Exécution</h3>
            <ul>
              <li>Serveur frontend : <span class="mono">127.0.0.1:8000</span></li>
              <li>API : <span class="mono">127.0.0.1:5001</span> (prefix <span class="mono">/api</span>)</li>
              <li>Thread d’ETL : mise à jour périodique des données (toutes les 30 min).</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Architecture</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 3 -->
      <section class="slide" data-title="Fonctionnalités">
        <h2 class="title">Fonctionnalités principales</h2>
        <p class="subtitle">Les onglets de l’application et ce qu’ils apportent au métier.</p>

        <div class="grid">
          <div class="card">
            <h3>Articles & stock</h3>
            <ul>
              <li><b>info_article</b> : fiche article (PIM), fournisseurs, équivalences, nomenclature.</li>
              <li><b>RECHERCHE_STOCK</b> : stock agrégé par magasin / type de dépôt / qualité.</li>
              <li><b>Stock détaillé / hyper détaillé</b> : niveau emplacement / lot / série / projet.</li>
              <li><b>Statistiques sorties</b> : lecture des sorties (par année/motif).</li>
            </ul>
          </div>
          <div class="card">
            <h3>Réseau & opérationnel</h3>
            <ul>
              <li><b>Magasins & points relais</b> : recherche autour d’une adresse + annuaire PR.</li>
              <li><b>Localisation du stock</b> : carte Leaflet, filtres, export CSV.</li>
              <li><b>Parc Helios</b> : synthèse et listes de sites actifs.</li>
              <li><b>CONSULTATION MAGASIN</b> : magasin/technicien + PR associés.</li>
              <li><b>OL Mode dégradé</b> : préparation d’ordres de livraison (V1/V2).</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Fonctionnalités</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 4 -->
      <section class="slide" data-title="Données">
        <h2 class="title">Données & référentiels</h2>
        <p class="subtitle">Données sources (parquets) et principe de rafraîchissement.</p>

        <div class="grid">
          <div class="card">
            <h3>Parquets majeurs utilisés</h3>
            <ul>
              <li><span class="mono">pudo_directory.parquet</span> : annuaire points relais (enseigne, adresse, statut...).</li>
              <li><span class="mono">stores.parquet</span> : magasins / dépôts (contacts, PR magasin, géoloc).</li>
              <li><span class="mono">items.parquet</span> : référentiel articles (PIM).</li>
              <li><span class="mono">stock_554.parquet</span> / <span class="mono">stock_final.parquet</span> : stock (agrégé et détaillé).</li>
              <li><span class="mono">helios.parquet</span> : parc installé / sites IG.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Mise à jour</h3>
            <ul>
              <li>Thread ETL : vérifie et copie/met à jour les parquets de travail.</li>
              <li>Endpoint : <span class="mono">GET /api/updates/status</span>.</li>
              <li>But : travailler sur des données fraîches, sans action manuelle.</li>
            </ul>
            <p class="small">L’application est conçue pour être robuste si un parquet est absent (retours vides plutôt que crash).</p>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Données</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 5 -->
      <section class="slide" data-title="Évolutions 1.3">
        <h2 class="title">Évolutions – v1.3.0</h2>
        <p class="subtitle">Qualité de recherche et indicateurs métier.</p>

        <div class="grid">
          <div class="card">
            <h3>Catégorie « sans sortie »</h3>
            <ul>
              <li>Ajout de <span class="mono">categorie_sans_sortie</span> (articles dormants).</li>
              <li>Badge couleur dans <b>info_article</b> et <b>RECHERCHE_STOCK</b>.</li>
              <li>Aide à prioriser déstockage et surveillance.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Recherche fournisseur</h3>
            <ul>
              <li>Recherche d’articles via informations fournisseurs (agrégation depuis <span class="mono">manufacturers.parquet</span>).</li>
              <li>Gain de temps : retrouver un article par référence fabricant/nom fournisseur.</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Évolutions v1.3.0</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 6 -->
      <section class="slide" data-title="Évolutions 1.4">
        <h2 class="title">Évolutions – v1.4.0</h2>
        <p class="subtitle">OL Mode dégradé V2 : meilleure décision logistique.</p>

        <div class="grid">
          <div class="card">
            <h3>OL MODE DÉGRADÉ V2</h3>
            <ul>
              <li>Carte + tableau unifiés.</li>
              <li>Prise en compte des distances au PR technicien.</li>
              <li>Tri métier : magasins avec tous les articles en stock puis distance PR.</li>
              <li>UX : surbrillance hors norme, liens vers recherche stock.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Intégrations</h3>
            <ul>
              <li>Liens directs depuis l’OL vers <span class="mono">stock.html?code=...</span>.</li>
              <li>Amélioration des informations de destination (IG/PR/adresse libre).</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Évolutions v1.4.0</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 7 -->
      <section class="slide" data-title="Évolutions 1.5">
        <h2 class="title">Évolutions – v1.5.0</h2>
        <p class="subtitle">Localisation du stock + Consultation magasin (PR override).</p>

        <div class="grid">
          <div class="card">
            <h3>Localisation du stock</h3>
            <ul>
              <li>Mode <b>sans code article</b> : afficher les magasins actifs par type de dépôt.</li>
              <li>Filtres améliorés (tout cocher/décocher).</li>
              <li>Markers colorés + légende.</li>
              <li>Export CSV <span class="mono">localisation_stock.csv</span> basé sur <span class="mono">stock_final.parquet</span>.</li>
            </ul>
          </div>
          <div class="card">
            <h3>CONSULTATION MAGASIN (règle PR)</h3>
            <ul>
              <li>Le PR affiché vient du référentiel <span class="mono">CHOIX_PR_TECH</span> : <span class="mono">R:\...\CHOIX_PR_TECH\choix_pr_tech.parquet</span>.</li>
              <li>Fallback : PR issu de <span class="mono">stores.parquet</span> si aucun override.</li>
              <li>Enrichissement (enseigne/adresse/statut) depuis <span class="mono">pudo_directory.parquet</span>.</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Évolutions v1.5.0</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 8 -->
      <section class="slide" data-title="Packaging">
        <h2 class="title">Packaging & distribution (EXE)</h2>
        <p class="subtitle">Livrer une application autonome (sans Python installé sur le poste).</p>

        <div class="grid">
          <div class="card">
            <h3>EXE NoLLM (recommandé pour diffusion)</h3>
            <ul>
              <li>Script : <span class="mono">scripts/build_exe_no_llm.ps1</span></li>
              <li>Sortie : <span class="mono">dist\SUPPLYCHAIN_APP_v1.5.0.exe</span></li>
              <li>But : éviter d’embarquer les dépendances LLM/RAG lourdes.</li>
            </ul>
            <div class="callout small">
              Bon réflexe : lancer l’EXE une première fois sur un poste « cible » pour valider accès réseau et parquets.
            </div>
          </div>
          <div class="card">
            <h3>Logs & diagnostic</h3>
            <ul>
              <li>Crash très tôt : <span class="mono">early_boot_*.log</span> (à côté de l’EXE).</li>
              <li>Crash après démarrage : <span class="mono">exe_crash_*.log</span> (dossier <span class="mono">logs</span> ou fallback à côté de l’EXE).</li>
              <li>Objectif : capturer les <span class="mono">ImportError</span> / erreurs runtime pour correction rapide.</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Packaging</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>

      <!-- Slide 9 -->
      <section class="slide" data-title="Fin">
        <h2 class="title">Fin</h2>
        <p class="subtitle">Support : README + SPEC_METIER (v1.5.0). Prochaines étapes selon besoin.</p>

        <div class="grid">
          <div class="card">
            <h3>Documentation</h3>
            <ul>
              <li><span class="mono">README.md</span> : build / run / packaging / logs.</li>
              <li><span class="mono">SPEC_METIER_SUPPLYCHAINAPP.md</span> : règles métier et usages.</li>
            </ul>
          </div>
          <div class="card">
            <h3>Idées d’évolutions</h3>
            <ul>
              <li>Amélioration de l’administration PR (workflow, contrôles de cohérence).</li>
              <li>Export/partage : générer automatiquement un PDF/PowerPoint depuis ces slides.</li>
              <li>Assistant : enrichir la navigation et les aides contextualisées.</li>
            </ul>
          </div>
        </div>

        <div class="foot">
          <div class="muted">Merci</div>
          <div class="progress"><div></div></div>
          <div class="mono" id="counter"></div>
        </div>
      </section>
    </div>
  </div>

  <script>
    (function () {
      const slides = Array.from(document.querySelectorAll('.slide'));
      const progressBars = Array.from(document.querySelectorAll('.progress > div'));

      let idx = 0;

      function update() {
        slides.forEach((s, i) => s.classList.toggle('active', i === idx));
        const pct = slides.length <= 1 ? 100 : Math.round((idx / (slides.length - 1)) * 100);
        progressBars.forEach(b => b.style.width = pct + '%');

        const counters = document.querySelectorAll('#counter');
        counters.forEach(c => {
          c.textContent = String(idx + 1) + ' / ' + String(slides.length);
        });

        document.title = 'SupplyChainApp – ' + (slides[idx]?.dataset?.title || 'Slides');
      }

      function next() {
        if (idx < slides.length - 1) {
          idx += 1;
          update();
        }
      }

      function prev() {
        if (idx > 0) {
          idx -= 1;
          update();
        }
      }

      function first() {
        idx = 0;
        update();
      }

      function last() {
        idx = slides.length - 1;
        update();
      }

      window.addEventListener('keydown', (e) => {
        const key = e.key;
        if (key === 'ArrowRight' || key === 'PageDown' || key === ' ') {
          e.preventDefault();
          next();
          return;
        }
        if (key === 'ArrowLeft' || key === 'PageUp') {
          e.preventDefault();
          prev();
          return;
        }
        if (key === 'Home') {
          e.preventDefault();
          first();
          return;
        }
        if (key === 'End') {
          e.preventDefault();
          last();
          return;
        }
        if (key === 'Escape') {
          // petite aide: toggle plein écran si possible
          if (!document.fullscreenElement) {
            const el = document.documentElement;
            if (el.requestFullscreen) el.requestFullscreen().catch(() => {});
          } else {
            if (document.exitFullscreen) document.exitFullscreen().catch(() => {});
          }
        }
      });

      // click navigation
      window.addEventListener('click', (e) => {
        const x = e.clientX;
        const w = window.innerWidth || 1;
        if (x > w * 0.55) next();
        else prev();
      });

      // touch navigation
      let touchStartX = null;
      window.addEventListener('touchstart', (e) => {
        touchStartX = e.touches?.[0]?.clientX ?? null;
      }, { passive: true });
      window.addEventListener('touchend', (e) => {
        const endX = e.changedTouches?.[0]?.clientX ?? null;
        if (touchStartX == null || endX == null) return;
        const dx = endX - touchStartX;
        if (Math.abs(dx) < 40) return;
        if (dx < 0) next(); else prev();
        touchStartX = null;
      }, { passive: true });

      update();
    })();
  </script>
</body>
</html>
